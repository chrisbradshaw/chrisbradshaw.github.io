function Visualization(e){var t,o,a,i,s,r,n=!1,l=e.renderer,d=e.width||360,c=e.height||360,u=function(n){o=n||e.song,t=$(o)[0],t.crossOrigin="anonymous",s=new(window.AudioContext||window.webkitAudioContext),a=s.createAnalyser(),i=s.createMediaElementSource(t),i.connect(a),a.connect(s.destination),a.fftSize=32,r=new Uint8Array(a.frequencyBinCount),l.init({song:$(o).attr("id"),count:a.frequencyBinCount,width:d,height:c})};this.start=function(){t.volume=.8,t.play(),n=!0,h()},this.stop=function(){n=!1,t.pause()},this.setRenderer=function(t){t.isInitialized()||t.init({song:$(e.song).attr("id"),count:a.frequencyBinCount,width:d,height:c}),l=t},this.isPlaying=function(){return n},this.remove=function(e){t.pause(),n=!1,s.close().then(e)};var h=function(){a.getByteFrequencyData(r),l.renderFrame(r),n&&requestAnimationFrame(h)};u()}function componentToHex(e){var t=e.toString(16);return 1==t.length?"0"+t:t}function rgbToHex(e,t,o){return"#"+componentToHex(e)+componentToHex(t)+componentToHex(o)}function playingCircles(){var e=[],t=!1,o=0,a=0,i=window.currentColor,s=[parseInt(i.substring(1,3),16),parseInt(i.substring(3,5),16),parseInt(i.substring(5),16)],r=[],n=function(i){var n=i.count;a=i.width,o=i.height;for(var l,d,c,u=.66*a>>0,h=document.getElementById(i.song+"Circles"),p=0;p<n;p++){var g=document.createElement("div");g.style.width=g.style.height=p/n*u+"px",g.classList.add("circle"),e.push(g),h.appendChild(g);var m=.7;p<n/2?(l=Math.min(Math.max(Math.round(s[0]*(m*Math.max(p/2,1))),0),255),d=Math.min(Math.max(Math.round(s[1]*(m*Math.max(p/2,1))),0),255),c=Math.min(Math.max(Math.round(s[2]*(m*Math.max(p/2,1))),0),255)):(l=Math.min(Math.max(Math.round(255-(255-s[0])*(m*Math.max(p/2,1))),0),255),d=Math.min(Math.max(Math.round(255-(255-s[1])*(m*Math.max(p/2,1))),0),255),c=Math.min(Math.max(Math.round(255-(255-s[2])*(m*Math.max(p/2,1))),0),255)),r.push("rgb("+l+","+d+","+c+")")}t=!0},l=256,d=function(t){for(var o=0;o<e.length;o++){var a=e[o];a.style.cssText="-webkit-transform:scale("+t[o]/l+"); box-shadow: 0 0 2px 2px "+r[o]+";"}};return{init:n,isInitialized:function(){return t},renderFrame:d}}$(function(e){function t(e,t){h++,g=h/p,TweenMax.to(w,.7,{progress:g,ease:Linear.easeNone})}function o(){g=Math.round(100*w.progress()),e(".txt-perc").text(g+"%")}function a(){var t=new TimelineMax;return t.to(e(".progress"),.3,{y:100,autoAlpha:0,ease:Back.easeIn}).to(e(".txt-perc"),.3,{y:100,autoAlpha:0,ease:Back.easeIn},.1).set(e("body"),{className:"-=is-loading"}).set(e("#intro"),{className:"+=is-loaded"}).to(e("#preloader"),.7,{yPercent:100,ease:Power4.easeInOut}).set(e("#preloader"),{className:"+=is-hidden"}).from(e("#intro .title"),1,{autoAlpha:0,ease:Power1.easeOut},"-=0.2").from(e("#intro .title-light"),.2,{autoAlpha:0,ease:Power1.easeOut},"+=0.2").to(e("#intro .title-light"),.2,{autoAlpha:1,ease:Power1.easeOut},"+=0.2").fromTo(e("#intro .title-light"),.1,{autoAlpha:0},{autoAlpha:1}).fromTo(e("#intro .title-light"),.5,{autoAlpha:0},{autoAlpha:1}).fromTo(e("#intro .title-light"),.1,{autoAlpha:0},{autoAlpha:1},"+=0.2"),t}function i(e,t){var o=100*t,a=2*-t;TweenMax.to(e,.3,{y:o,opacity:a,overwrite:5,force3D:!0})}function s(t){var o=e(t),a=o.data("fromtime").split(":"),i=o.data("totime").split(":"),s=parseFloat(a[0]),r=parseFloat(a[1]),n=parseFloat(i[0]),l=parseFloat(i[1]),d=12==s?0:60*s+r,c=60*n+l,u={totTime:d},h=o.find(".hr"),p=o.find(".min"),g=o.find(".meridiem"),m=o.data("meridiem");TweenMax.to(u,2,{totTime:c,roundProps:"totTime",onStart:function(){g.length&&("AM"==m?g.text("PM"):g.text("AM"))},onComplete:function(){g.length&&("AM"==m?g.text("AM"):g.text("PM"))},onUpdate:function(){var e=Math.trunc(u.totTime/60),t=u.totTime%60;h.text("0"==e?"12":e),p.text(("0"+t).slice(-2))},ease:Expo.easeOut})}function r(e,t,o){var a=.01,i=15;t>2*a?K=setTimeout(function(){r(e,e.volume-=a,o)},i):(clearTimeout(K),"function"!=typeof o||o())}function n(t){var o=x[0];if(window.currentColor=T[t],"nickCatchdubs"==t){var a=e("#nickCatchdubsSong");X(a,o)}else if("whiteLung"==t){var i=e("#whiteLungSong");X(i,o)}else if("exHex"==t){var s=e("#exHexSong");X(s,o)}}var l=new ScrollMagic.Controller,d=["#slide11","#slide12","#slide13","#slide14","#slide15","#slide06","#slide07","#slide08","#slide09","#slide10","#slide01","#slide02","#slide03","#slide04","#slide05"],c=["#intro header","#slide11 header","#slide12 header","#slide13 header","#slide14 header","#slide15 header","#slide06 header","#slide07 header","#slide08 header","#slide09 header","#slide10 header","#slide01 header","#slide02 header","#slide03 header","#slide04 header","#slide05 header"],u=["#cb01","#cb12","#cb13","#cb14","#cb015","#cb16","#cb17","#cb07","#cb08","#cb09","#cb010","#cb11","#cb12","#cb02","#cb02","#cb03","#cb04","#cb05","#cb06"],h=0,p=e(".bcg").not(".skip").length,g=0;e(".bcg").not(".skip").imagesLoaded({background:!0}).progress(function(e,o){t()});var m=!("function"==typeof AudioContext),w=new TimelineMax({paused:!0,onUpdate:o,onComplete:a});w.to(e(".progress span"),1,{width:160,ease:Linear.easeNone});var f="Nick Catchdubs<p>Tick Tick Bounce</p>",v="White Lung<p>Below</p>",y="Ex Hex<p>How You Got That Girl</p>",T={nickCatchdubs:"#d5ff45",whiteLung:"#ff004e",exHex:"#705edd"};window.currentColor=T.exHex;var x=e("#exHexSong");x.addClass("currentSong"),e("#slide03").on("click",function(){window.open("http://www.converse.com/us/en_us/c/converse")}),e("#white-converse-shoes").on("click",function(){window.open("http://www.converse.com/us/en_us/c/converse")}),e("#group-photo").on("click",function(){window.open("http://www.converse.com/us/en_us/c/converse")});var P="";if(e("#shop-now-white").hover(function(){e("#shop-img-white")[0].src=P+"img/ShopNow_hover_WhiteLung.png"},function(){e("#shop-img-white")[0].src=P+"img/ShopNow_white.png"}),e("#shop-now-div").hover(function(){e("#shop-img")[0].src=P+"img/ShopNow_Hover_Catchdubs.png"},function(){e("#shop-img")[0].src=P+"img/ShopNow.png"}),e("#shop-now-ex").hover(function(){e("#shop-img-ex")[0].src=P+"img/ShopNow_Hover_ExHex.png"},function(){e("#shop-img-ex")[0].src=P+"img/ShopNowLockup_hex.png"}),e("#catchdubs").hover(function(){var t=e(this);t.hasClass("currentArtist")||t.addClass("artistColor")},function(){var t=e(this);t.hasClass("currentArtist")||t.removeClass("artistColor")}),e("#whiteLung").hover(function(){var t=e(this);t.hasClass("currentArtist")||t.addClass("artistColor")},function(){var t=e(this);t.hasClass("currentArtist")||t.removeClass("artistColor")}),e("#exHex").hover(function(){var t=e(this);t.hasClass("currentArtist")||t.addClass("artistColor")},function(){var t=e(this);t.hasClass("currentArtist")||t.removeClass("artistColor")}),!Modernizr.touch){c.forEach(function(e,t){var o=t+1;new ScrollMagic.Scene({triggerElement:e,offset:-95}).setClassToggle("#slide0"+o,"is-active").addTo(l)}),u.forEach(function(t,o){var a=e(t).attr("id");new ScrollMagic.Scene({triggerElement:t,triggerHook:.75}).setClassToggle("#"+a,"is-active").on("enter",function(t){e("nav").attr("class","is-light")}).addTo(l)}),d.forEach(function(t,o){new ScrollMagic.Scene({triggerElement:t}).on("enter",function(t){e("nav").removeAttr("class")}).addTo(l)}),d.forEach(function(t,o){var a=e(t).find(".bcg");new ScrollMagic.Scene({triggerElement:t,triggerHook:1,duration:"100%"}).on("progress",function(e){i(a,-(e.progress/2))}).addTo(l)});var A=new TimelineMax;A.fromTo(e("#slide11 section"),1,{y:"+200"},{y:"0",onStart:function(){e(".currentArtist").removeClass("currentArtist").removeClass("artistColor"),e("#exHex").addClass("artistColor").addClass("currentArtist"),e("#nowPlaying")[0].innerHTML=y;var t=e("#slide11 .timestamp");s(t)}},"+=0").to(e("#slide11 .timestamp"),1,{autoAlpha:1,ease:Power1.easeOut}).fromTo(e("#slide11 #ex-hex"),.5,{y:"+1000",ease:Power1.easeOut},{y:"0"},"-=1").set({},{},3);var C=(new ScrollMagic.Scene({triggerElement:"#slide11",triggerHook:0,duration:"200%"}).setPin("#slide11").setTween(A).addTo(l),e("#slide12 #union-pool")),M=e("#slide12 #ex-converse-shoes"),S=(e("#slide12 .bcg"),e("#slide12 .overbcg")),b=new TimelineMax;b.fromTo(C,1,{y:"+=20"},{autoAlpha:1,ease:Power1.easeOut,onStart:function(){var t=e("#slide12 #union-pool.timestamp");s(t)}}).from(e("#slide12 #poloroid-hex"),1,{autoAlpha:0,x:-200,ease:Power2.easeIn},"-=1").to(C,1,{autoAlpha:0,ease:Power1.easeOut},"+=0.5").to(S,1.5,{top:0,ease:Power1.easeOut},"-=0.5").to(e("#slide12 #poloroid-hex"),1,{autoAlpha:0},"-=1.5").to(M,1,{marginTop:"-5%",ease:Power2.easeOut},"-=2").to(e("#slide12 #academy-records"),1,{autoAlpha:1,ease:Power1.easeOut,onStart:function(){var t=e("#slide12 #academy-records.timestamp");s(t)}},"-=1").to(e("#slide12 #ex-fade-text"),1,{autoAlpha:1,ease:Power1.easeOut},"-=0.75").to(e("#slide12 #ex-fade-text p"),1,{y:"-=400",ease:Power1.easeOut},"+=0.75");var O=(new ScrollMagic.Scene({triggerElement:"#slide12",triggerHook:0,duration:"500%"}).setPin("#slide12").setTween(b).addTo(l),new TimelineMax);O.fromTo(e("#slide13 header"),1,{y:"+=20"},{y:0,autoAlpha:1,ease:Power1.easeOut,onStart:function(){var t=e("#slide13 .timestamp");s(t)}}).fromTo(e("#slide13 section"),1,{y:"+=20"},{y:0,autoAlpha:1,ease:Power1.easeOut}).to(e("#slide13 section"),1,{autoAlpha:1});var k=(new ScrollMagic.Scene({triggerElement:"#slide13",triggerHook:0,duration:"150%"}).setPin("#slide13").setTween(O).addTo(l),new TimelineMax);k.to(e("#slide14"),.4,{autoAlpha:1,onStart:function(){var t=e("#slide14 .timestamp");s(t)}}).fromTo(e("#slide14 header"),.7,{y:"+=20"},{y:0,autoAlpha:1,ease:Power1.easeOut}).to(e("#slide14 #group-photo"),1,{top:"185px",ease:Power1.easeOut}).fromTo(e("#slide14 section"),1,{y:"+=200"},{y:"100",autoAlpha:1,ease:Power1.easeOut},"-=0.2").to(e("#slide14 section"),1,{y:"-300px",ease:Power1.easeOut}).to(e("#slide14 .timestamp"),.5,{color:"#000",ease:Power1.easeIn},"-=1.7").to(e("#slide14 #baby-triangle"),1,{top:"-75%",ease:Power1.easeIn},"-=2");var H=(new ScrollMagic.Scene({triggerElement:"#slide14",triggerHook:0,duration:"200%"}).setPin("#slide14").setTween(k).addTo(l),new TimelineMax);H.fromTo(e("#slide15 header"),.7,{y:"+=20"},{y:0,autoAlpha:1,ease:Power1.easeOut,onStart:function(){var t=e("#slide15 .timestamp");s(t)}}).fromTo(e("#slide15 section"),.5,{y:"+=20"},{y:"-=50",autoAlpha:1,ease:Power1.easeOut}).to(e("#slide15 section"),1,{y:"-=400",ease:Power1.easeOut});var E=(new ScrollMagic.Scene({triggerElement:"#slide15",triggerHook:0,duration:"200%"}).setPin("#slide15").setTween(H).on("enter",function(){e(".currentArtist").removeClass("currentArtist").removeClass("artistColor"),e("#exHex").addClass("artistColor").addClass("currentArtist"),e("#nowPlaying")[0].innerHTML=y,n("exHex")}).addTo(l),new TimelineMax);E.fromTo(e("#slide06 section"),1,{y:"+200"},{y:"0",onStart:function(){e(".currentArtist").removeClass("currentArtist").removeClass("artistColor"),e("#whiteLung").addClass("artistColor").addClass("currentArtist"),e("#nowPlaying")[0].innerHTML=v,n("whiteLung");var t=e("#slide06 .timestamp");s(t)}},"+=0").to(e("#slide06 .timestamp"),1,{autoAlpha:1,ease:Power1.easeOut}).fromTo(e("#slide06 #white-lung"),.5,{y:"+1000",ease:Power1.easeOut},{y:"0"},"-=1").set({},{},3);var C=(new ScrollMagic.Scene({triggerElement:"#slide06",triggerHook:0,duration:"200%"}).setPin("#slide06").setTween(E).addTo(l),e("#slide07 #st-vitus")),M=e("#slide07 #white-converse-shoes"),L=(e("#slide07 .bcg"),e("#slide07 .overbcg")),I=new TimelineMax;I.fromTo(C,1,{y:"+=20"},{autoAlpha:1,ease:Power1.easeOut,onStart:function(){var t=e("#slide07 #st-vitus.timestamp");s(t)}}).to(C,1,{autoAlpha:0,ease:Power1.easeOut},"+=1").to(L,1.5,{top:0,ease:Power1.easeOut},"-=0.5").to(M,1,{marginTop:"-5%",ease:Power2.easeOut},"-=2").to(e("#slide07 #milk-honey"),1,{autoAlpha:1,ease:Power1.easeOut,onStart:function(){var t=e("#slide07 #milk-honey.timestamp");s(t)}},"-=1").to(e("#slide07 #white-milk-quote"),1,{autoAlpha:1,ease:Power1.easeOut},"-=0.75");var B=(new ScrollMagic.Scene({triggerElement:"#slide07",triggerHook:0,duration:"500%"}).setPin("#slide07").setTween(I).addTo(l),new TimelineMax);B.fromTo(e("#slide08 header"),1,{y:"+=20"},{y:0,autoAlpha:1,ease:Power1.easeOut,onStart:function(){var t=e("#slide08 .timestamp");s(t)}}).fromTo(e("#slide08 section"),1,{y:"+=20"},{y:0,autoAlpha:1,ease:Power1.easeOut}).to(e("#slide08 section"),1,{autoAlpha:1});var N=(new ScrollMagic.Scene({triggerElement:"#slide08",triggerHook:0,duration:"150%"}).setPin("#slide08").setTween(B).addTo(l),new TimelineMax);N.to(e("#slide09"),.4,{autoAlpha:1,onStart:function(){var t=e("#slide09 .timestamp");s(t)}}).fromTo(e("#slide09 header"),.7,{y:"+=20"},{y:0,autoAlpha:1,ease:Power1.easeOut}).to(e("#slide09 #group-photo"),1,{top:"185px",ease:Power1.easeOut}).fromTo(e("#slide09 section"),1,{y:"+=200"},{y:"100",autoAlpha:1,ease:Power1.easeOut},"-=0.2").to(e("#slide09 section"),1,{y:"-200px",ease:Power1.easeOut}).to(e("#slide09 .timestamp"),.5,{color:"#000",ease:Power1.easeIn},"-=1.7").to(e("#slide09 #river-triangle"),1,{top:"-75%",ease:Power1.easeIn},"-=2");var _=(new ScrollMagic.Scene({triggerElement:"#slide09",triggerHook:0,duration:"200%"}).setPin("#slide09").setTween(N).addTo(l),new TimelineMax);_.fromTo(e("#slide10 header"),.7,{y:"+=20"},{y:0,autoAlpha:1,ease:Power1.easeOut,onStart:function(){var t=e("#slide10 .timestamp");s(t)}}).fromTo(e("#slide10 section"),.5,{y:"+=20"},{y:"-=50",autoAlpha:1,ease:Power1.easeOut}).to(e("#slide10 section"),1,{y:"-=400",ease:Power1.easeOut});var F=(new ScrollMagic.Scene({triggerElement:"#slide10",triggerHook:0,duration:"200%"}).setPin("#slide10").setTween(_).on("enter",function(){e(".currentArtist").removeClass("currentArtist").removeClass("artistColor"),e("#whiteLung").addClass("artistColor").addClass("currentArtist"),e("#nowPlaying")[0].innerHTML=v,n("whiteLung")}).addTo(l),new TimelineMax);F.fromTo(e("#slide01 section"),1,{y:"+200"},{y:"0",onStart:function(){e(".currentArtist").removeClass("currentArtist").removeClass("artistColor"),e("#catchdubs").addClass("artistColor").addClass("currentArtist"),e("#nowPlaying")[0].innerHTML=f,n("nickCatchdubs");var t=e("#slide01 .timestamp");s(t)}},"+=0").to(e("#slide01 .timestamp"),1,{autoAlpha:1,ease:Power1.easeOut}).fromTo(e("#slide01 #nick-catchdubs"),.5,{y:"+1000",ease:Power1.easeOut},{y:"0"},"-=1").set({},{},3);var q=(new ScrollMagic.Scene({triggerElement:"#slide01",triggerHook:0,duration:"200%"}).setPin("#slide01").setTween(F).addTo(l),e("#slide02 #comic-book")),z=e("#slide02 .comic-quote"),V=e("#slide02 #foam-hand"),$=(e("#slide02 .bcg"),e("#slide02 .overbcg")),D=new TimelineMax;D.fromTo(q,1,{y:"+=20"},{autoAlpha:1,ease:Power1.easeOut,onStart:function(){var t=e("#slide02 #comic-book.timestamp");s(t)}}).to(z,1,{autoAlpha:1,ease:Power1.easeOut}).to([z,q],1,{autoAlpha:0,ease:Power1.easeOut},"+=1").to($,1.5,{top:0,ease:Power1.easeOut},"-=0.5").to(V,1,{marginTop:"-5%",ease:Power2.easeOut},"-=2").to(e("#slide02 #gold-store"),1,{autoAlpha:1,ease:Power1.easeOut,onStart:function(){var t=e("#slide02 #gold-store.timestamp");s(t)}},"-=1").to(e("#slide02 #fools-gold-pinball"),1,{autoAlpha:1,ease:Power1.easeOut},"-=0.75");var U=(new ScrollMagic.Scene({triggerElement:"#slide02",triggerHook:0,duration:"500%"}).setPin("#slide02").setTween(D).addTo(l),new TimelineMax);U.fromTo(e("#slide03 header"),1,{y:"+=20"},{y:0,autoAlpha:1,ease:Power1.easeOut,onStart:function(){var t=e("#slide03 .timestamp");s(t)}}).fromTo(e("#slide03 section"),1,{y:"+=20"},{y:0,autoAlpha:1,ease:Power1.easeOut}).to(e("#slide03 section"),1,{autoAlpha:1});var G=(new ScrollMagic.Scene({triggerElement:"#slide03",triggerHook:0,duration:"150%"}).setPin("#slide03").setTween(U).addTo(l),new TimelineMax);G.to(e("#slide04"),.4,{autoAlpha:1,onStart:function(){var t=e("#slide04 .timestamp");s(t)}}).fromTo(e("#slide04 header"),.7,{y:"+=20"},{y:0,autoAlpha:1,ease:Power1.easeOut}).to(e("#slide04 #playing-pinball"),1,{top:"185px",ease:Power1.easeOut}).fromTo(e("#slide04 section"),1,{y:"+=200"},{y:"100",autoAlpha:1,ease:Power1.easeOut},"-=0.2").to(e("#slide04 section"),1,{y:"-350px",ease:Power1.easeOut}).to(e("#slide04 .timestamp"),.5,{color:"#000",ease:Power1.easeIn},"-=1.7").to(e("#slide04 #pinball-triangle"),1,{top:"-75%",ease:Power1.easeIn},"-=2.5");var R=(new ScrollMagic.Scene({triggerElement:"#slide04",triggerHook:0,duration:"200%"}).setPin("#slide04").setTween(G).addTo(l),new TimelineMax);R.fromTo(e("#slide05 header"),.7,{y:"+=20"},{y:0,autoAlpha:1,ease:Power1.easeOut,onStart:function(){var t=e("#slide05 .timestamp");s(t)}}).fromTo(e("#slide05 section"),.6,{y:"+=20"},{autoAlpha:1,ease:Power1.easeOut});new ScrollMagic.Scene({triggerElement:"#slide05",triggerHook:0,duration:"100%"}).setPin("#slide05").setTween(R).addTo(l);l.scrollTo(function(e){TweenMax.to(window,1,{scrollTo:{y:e},ease:Power1.easeInOut})}),e(document).on("click","a[href^='#']",function(t){var o=e(this).attr("href");e(o).length>0&&(t.preventDefault(),l.scrollTo(o),window.history&&window.history.pushState&&history.pushState("",document.title,o))})}e("#catVideo")[0].play(),e("#lungVideo")[0].play(),e("#white-streets-video")[0].play(),e("#hexVideo")[0].play(),e("#ex-streets-video")[0].play();var W,j,Q={nickCatchdubsSong:null,whiteLungSong:null,exHexSong:null},Y=null,J=function(){var t=e("#playingCircles")[0],o=t.parentNode.id,a=playingCircles();Y=Q[x.attr("id")];var i=x.attr("id")+"Circles";Y||(e("#playingCircles").append(e('<div class="artistCircles" id = "'+i+'"></div>')),Q[x.attr("id")]=new Visualization({song:x[0],renderer:a}),Y=Q[x.attr("id")]),e(".artistCircles").not("#"+i).hide(),e("#"+i).show(),Y.setRenderer(a),Y.isPlaying()?j===o?(Y.stop(),t.style.backgroundColor="rgba(0,0,0,0.5)"):(W.style.backgroundColor="rgba(0,0,0,0.5)",t.style.backgroundColor="rgba(0,0,0,0)"):(Y.start(),t.style.backgroundColor="rgba(0,0,0,0)"),j=o,W=t};e("#playBtn").on("click",function(){x[0].volume=.8,m?x[0].play():J(x),this.style.display="none",e("#pauseBtn").css("display","block")}),e("#pauseBtn").on("click",function(){m?x[0].pause():J(x),this.style.display="none",e("#playBtn").css("display","block")});var K,X=function(t,o){x=t,o.paused||r(o,o.volume,function(){m?(o.pause(),o.volume=.8,t[0].play()):(Y.stop(),J())}),e(".currentSong").removeClass("currentSong"),t.addClass("currentSong")}}(jQuery));